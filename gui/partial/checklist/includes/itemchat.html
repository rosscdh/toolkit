
<h4 class="ng-scope">
    <a href="javascript:;" ng-click="activateActivityStream('item')" ng-show="data.selectedItem"
       ng-class="{'active':data.streamType=='item', 'inactive':data.streamType=='matter'}" style="margin-right:12px;">Item Activity</a>
    <a href="javascript:;" ng-click="activateActivityStream('matter')"
       ng-class="{'active':data.streamType=='matter', 'inactive':data.streamType=='item'}">All Activity</a>
</h4>
<div class="new-message row" ng-show="data.selectedItem" ng-mouseenter="show = true">
    <div class="col-xs-12">
        <form ng-submit="submitComment()" >
            <textarea class="form-control" rows="2" placeholder="Comment on this item..." ng-model="data.selectedItem.newcomment" required></textarea>
            <button class="btn btn-inverse btn-textarea btn-xs" type="submit" ng-show="show">Submit</button>
        </form>
    </div>
</div>
<ul class="list-unstyled">
    <li ng-repeat="activity in data.activitystream"
        ng-class="{'action': activity.data.comment==null, 'message me': activity.data.comment!=null&&activity.actor.username==data.usdata.current.username, 'message other': activity.data.comment!=null&&activity.actor.username!=data.usdata.current.username }">
        <div class="media" ng-show="activity.data.comment&&data.selectedItem">
            <a class="user-icon" href="#" tooltip="{{ activity.actor | fullname }},{{ activity.timestamp | timeago }}"  tooltip-placement="right">{{ activity.actor | initials }}</a>
            <div class="media-body">
                <div class="msg-body" ng-bind-html="activity.data.comment | newlines"></div>
                <div class="msg-meta">
                   <!--  {{ activity.actor | fullname }},  -->{{ activity.timestamp | timeago }} &middot;
                    <span ng-show="deleteCommentIsEnabled(activity)"><a href="javascript:;" ng-click="deleteComment(activity)">Delete</a></span>
                </div>
            </div>
        </div>
        <span ng-hide="activity.data.comment" ng-bind-html="activity.event"></span>
    </li>
    <li ng-show="!data.activitystream.length"><small class="lead text-muted">Discussion and activity will appear here.</small></li>
</ul>
