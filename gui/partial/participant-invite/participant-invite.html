<div class="modal-content" xmlns="http://www.w3.org/1999/html">
	<div class="modal-header">
		<h4 class="modal-title" id="myModalLabel"><span class="fui-user text-muted"></span> Matter Participants</h4>
	</div>
	<div class="modal-body">
        <div ng-hide="data.showAddLawyer||data.showAddParticipant">
            <h5 ng-show="participants.length>0">Existing Participants</h5>
            <ul class="list-unstyled participants">
                <li ng-repeat="person in participants">
                    <span class="user" ng-bind="person | initials"></span>
                    <label ng-bind="person | fullname"></label>
                    <small ng-show="person.user_class=='lawyer'">({{ person.user_class }}<span ng-show="person.username==currentUser.username">, you</span>)</small>
                    <a class="text-danger" ng-show="person.username!==currentUser.username" href="javascript:;" ng-click="revoke(person)"><small>Revoke access</small></a>
                </li>
            </ul>
            <br />
            <h5>Add New Participant</h5>
            <div class="row">
                <div class="col-sm-6">
                    <a href="javascript:;" class="btn btn-primary" ng-click="data.showAddLawyer=true">Add a Lawyer</a>
                    <br />
                    <p class="note">Adding a lawyer to this matter will give them full access to modify the checklist, add files and manage the transaction.</p>
                </div>
                <div class="col-sm-6">
                    <a href="javascript:;" class="btn btn-info" ng-click="data.showAddParticipant=true">Add a Client</a>
                    <br />
                    <p class="note">
                    Adding a client to the checklist will give them access to view and annotate documents and discuss checklist items. They can not modify the checklist structure or view previous revisions of documents.
                    </p>
                </div>
            </div>
        </div>


		<form class="form" ng-submit="invite()" ng-show="data.showAddLawyer">
            <h5>Add a Lawyer <a href="#" class="close" ng-click="data.showAddLawyer=false;">x</a></h5>
            <p>Adding a lawyer to this matter will give them access to edit the checklist, download documents and assign tasks. </p>
			<div  ng-class="{'has-success': data.participant, 'has-warning': data.isNew, 'has-error': data.validationError }">
				<p class="bg-info" for="inviteeEmail" ng-show="data.participant">Lawyer {{ data.participant | fullname }} found. </p>
                <p class="bg-danger" for="inviteeEmail" ng-show="data.isNew">Lawyer must be a registered LawPal user. Please ask them to signup at LawPal.com</p>
                <p class="bg-danger" for="inviteeEmail" ng-show="data.isParticipant">This user is not registered as a lawyer on LawPal. Please contact support@lawpal.com. </p>
				<input type="email" id="inviteeEmail" class="form-control form-control-full-width" ng-model="data.invitee.email" placeholder="rob.s@gmail.com" required ng-blur="checkIfUserExists(true)" autocomplete="off"/>
			</div>
			<div >
				<textarea class="form-control form-control-full-width" ng-model="data.invitee.message" placeholder="Add an optional message"></textarea>
			</div>
			<div >
				<button class="btn btn-success btn-wide btn-sm" ng-disabled="data.validationError">Add Lawyer</button>
			</div>
		</form>

        <form class="form" ng-submit="invite()" ng-show="data.showAddParticipant">
            <h5>Add a Client <a href="#" class="close" ng-click="data.showAddParticipant=false;">x</a></h5>
            <p>Adding a client to this matter will give them access to view the checklist and the latest version of each document.</p>
			<div ng-class="{'has-success': data.participant, 'has-warning': data.isNew, 'has-error': data.validationError }">
    		    <p class="bg-info" for="inviteeEmail" ng-show="data.participant">{{ data.participant | fullname }} found.</p>
                <p class="bg-info" for="inviteeEmail" ng-show="data.isNew">User does not exist yet. They will be invited to LawPal.</p>
                <p class="bg-danger" for="inviteeEmail" ng-show="data.isLawyer">The entered mail address belongs to a lawyer. Lawyers can not currently be added to matters as clients.</p>

				<input type="email" id="inviteeEmail" class="form-control form-control-full-width" ng-model="data.invitee.email"
                       placeholder="your_email@gmail.com" required ng-blur="checkIfUserExists()"/>
        		</div>
            <div class="">
                <input type="text" class="form-control input-sm" ng-model="data.invitee.first_name" placeholder="First name" ng-show="data.isNew" />
                <input type="text" class="form-control input-sm" ng-model="data.invitee.last_name" placeholder="Last name" ng-show="data.isNew" />
            </div>
			<div class="">
				<textarea class="form-control form-control-full-width" ng-model="data.invitee.message" placeholder="Add an optional message"></textarea>
			</div>
			<div >
				<button class="btn btn-info btn-wide btn-sm" ng-disabled="data.validationError">Add a Client</button>
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<!--<button class="btn btn-primary" ng-click="ok()">OK</button>//-->
		<button class="btn btn-default" ng-click="cancel()">Close</button>
	</div>
</div>