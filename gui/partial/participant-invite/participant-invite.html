<div class="modal-content" xmlns="http://www.w3.org/1999/html">
	<div class="modal-header">
		<h4 class="modal-title" id="myModalLabel">Matter Participants</h4>
	</div>
	<div class="modal-body">
        <div ng-hide="data.showAddLawyer||data.showAddParticipant">
            <h5 ng-show="participants.length>0">Existing Participants</h5>
            <ul class="list-unstyled participants">
                <li ng-repeat="person in participants">
                    <span class="user" ng-bind="person | initials"></span>
                    <label ng-bind="person | fullname"></label>
                    <small ng-show="person.user_class=='lawyer'">({{ person.user_class }}<span ng-show="person.username==currentUser.username">, you</span>)</small>
                    <a class="text-danger" ng-show="person.username!==currentUser.username" href="javascript:;" ng-click="revoke(person)"><small>Revoke access</small></a>
                </li>
            </ul>
            <br />
            <h5>Add New Participant</h5>
            <div class="row">
                <div class="col-sm-6">
                    <a href="javascript:;" class="btn btn-primary" ng-click="data.showAddLawyer=true">Add a Lawyer</a>
                    <br />
                    <p class="note">Adding a lawyer to this matter will give them full access to modify the checklist, add files and manage the transaction.</p>
                </div>
                <div class="col-sm-6">
                    <a href="javascript:;" class="btn btn-info" ng-click="data.showAddParticipant=true">Add a Client</a>
                    <br />
                    <p class="note">
                    Adding a client to the checklist will give them access to view and annotate documents and discuss checklist items. They can not modify the checklist structure or view previous revisions of documents.
                    </p>
                </div>
            </div>
        </div>


		<form class="form" ng-submit="invite()" ng-show="data.showAddLawyer">
            <h5>Add New Lawyer</h5>
			<div class="form-group" ng-class="{'has-success': data.participant, 'has-warning': data.isNew, 'has-error': data.validationError }">
				<input type="email" id="inviteeEmail" class="form-control form-control-full-width input-sm" ng-model="data.invitee.email"
                       placeholder="your_email@gmail.com" required ng-blur="checkIfUserExists(true)" autocomplete="off"/>
                 <label class="control-label" for="inviteeEmail" ng-show="data.participant">Lawyer {{ data.participant | fullname }} found</label>
                 <label class="control-label" for="inviteeEmail" ng-show="data.isNew">Lawyer must be registered.</label>
                 <label class="control-label" for="inviteeEmail" ng-show="data.isParticipant">The entered mail address belongs to a participant.</label>
			</div>
			<div class="form-group">
				<textarea class="form-control form-control-full-width" ng-model="data.invitee.message" placeholder="Add an optional message"></textarea>
			</div>
			<div class="form-group">
				<button class="btn btn-primary btn-wide btn-sm" ng-disabled="data.validationError">Add lawyer</button>
				<input type="button" class="btn btn-primary btn-wide btn-sm" ng-click="data.showAddLawyer=false;" value="Cancel" />
			</div>
		</form>

        <form class="form" ng-submit="invite()" ng-show="data.showAddParticipant">
            <h5>Add New Participant</h5>
			<div class="form-group" ng-class="{'has-success': data.participant, 'has-warning': data.isNew, 'has-error': data.validationError }">
				<input type="email" id="inviteeEmail" class="form-control form-control-full-width input-sm" ng-model="data.invitee.email"
                       placeholder="your_email@gmail.com" required ng-blur="checkIfUserExists()"/>
                 <label class="control-label" for="inviteeEmail" ng-show="data.participant">User {{ data.participant | fullname }} found</label>
                 <label class="control-label" for="inviteeEmail" ng-show="data.isNew">User does not exist yet</label>
                 <label class="control-label" for="inviteeEmail" ng-show="data.isLawyer">The entered mail address belongs to a lawyer.</label>
			</div>
            <div class="form-group form-inline">
                <input type="text" class="form-control input-sm" ng-model="data.invitee.first_name" placeholder="First name" ng-show="data.isNew" />
                <input type="text" class="form-control input-sm" ng-model="data.invitee.last_name" placeholder="Last name" ng-show="data.isNew" />
            </div>
			<div class="form-group">
				<textarea class="form-control form-control-full-width" ng-model="data.invitee.message" placeholder="Add an optional message"></textarea>
			</div>
			<div class="form-group">
				<button class="btn btn-primary btn-wide btn-sm" ng-disabled="data.validationError">Add participant</button>
                <input type="button" class="btn btn-primary btn-wide btn-sm" ng-click="data.showAddParticipant=false;" value="Cancel" />
			</div>
		</form>
	</div>
	<div class="modal-footer">
		<!--<button class="btn btn-primary" ng-click="ok()">OK</button>//-->
		<button class="btn btn-default" ng-click="cancel()">Close</button>
	</div>
</div>